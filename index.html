<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeMart - Enterprise Blockchain Commerce | Gaming & DeFi Bounty Ready</title>
    <meta name="description" content="Africa's first enterprise blockchain commerce platform with Gaming & DeFi features. Built for Stacks Hackathon bounties.">
    <style>
      <style>
    /* ADD THIS RIGHT AT THE BEGINNING OF YOUR STYLE TAG */
    :root {
        --primary: #667eea;
        --secondary: #764ba2;
        --accent: #00d4aa;
        --dark: #333;
        --light: #f8f9fa;
    }

    /* Your existing CSS continues here... */
    .bounty-badge {
        background: linear-gradient(135deg, #ff6b35 0%, #ff8e53 100%);
        /* ... rest of your existing CSS */
    }
        /* Previous CSS remains the same, adding new styles for bounty features */
        
        .bounty-badge {
            background: linear-gradient(135deg, #ff6b35 0%, #ff8e53 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 2px 10px rgba(255,107,53,0.3);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .gamification-features {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 3rem;
            border-radius: 20px;
            margin: 2rem 0;
            color: white;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .game-card {
            background: rgba(255,255,255,0.1);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        .game-card:hover {
            transform: translateY(-5px);
        }

        .game-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .defi-features {
            background: linear-gradient(135deg, #00d4aa 0%, #00b894 100%);
            padding: 3rem;
            border-radius: 20px;
            margin: 2rem 0;
            color: white;
        }

        .achievement-system {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 2rem;
        }

        .achievement {
            background: rgba(255,255,255,0.2);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            min-width: 120px;
        }

        .leaderboard {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }

        .leaderboard-item:last-child {
            border-bottom: none;
        }

        .rank {
            font-weight: bold;
            color: var(--primary);
        }

        /* Add to existing CSS */
    </style>
</head>
  <!-- ADD THIS RIGHT BEFORE </body> TAG -->
<!-- Missing Tab Contents -->
<div class="tab-content active" id="escrow-tab">
    <h3>üíº Enterprise Escrow Management</h3>
    <div class="transaction-form">
        <div class="form-group">
            <label>Buyer Address</label>
            <input type="text" id="buyer-address" placeholder="ST1...">
        </div>
        <div class="form-group">
            <label>Seller Address</label>
            <input type="text" id="seller-address" placeholder="ST1...">
        </div>
        <div class="form-group">
            <label>Escrow Amount (STX)</label>
            <input type="number" id="escrow-amount" placeholder="1000">
        </div>
        <div class="form-group">
            <label>Transaction Terms</label>
            <textarea id="transaction-terms" placeholder="Product delivery within 7 days..."></textarea>
        </div>
        <button class="enterprise-btn btn-primary" onclick="createEscrow()">
            üîí Create Secure Escrow
        </button>
    </div>
</div>

<!-- Add basic form styles -->
<style>
    .transaction-form {
        max-width: 600px;
        margin: 0 auto;
    }
    
    .form-group {
        margin-bottom: 1.5rem;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--dark);
    }
    
    .form-group input,
    .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        font-size: 16px;
    }
    
    .form-group input:focus,
    .form-group textarea:focus {
        border-color: var(--primary);
        outline: none;
    }
    
    .form-group textarea {
        height: 100px;
        resize: vertical;
    }
</style>
<body>
    <!-- Enterprise Header - ENHANCED WITH BOUNTY BADGES -->
    <header class="enterprise-header">
        <div class="header-container">
            <div class="logo-section">
                <div class="enterprise-logo">
                    <img src="sureway-logo.png" alt="MeMart" style="width: 100%; height: 100%; border-radius: 12px; object-fit: cover;">
                </div>
                <div class="logo-text">
                    <div class="logo-main">MeMart</div>
                    <div class="logo-subtitle">Enterprise Blockchain Commerce</div>
                </div>
                <div class="credentials-badge">
                    üèõÔ∏è CAMA 2020 Registered
                </div>
                <!-- BOUNTY BADGES -->
                <div class="bounty-badge">
                    üéÆ Gaming Bounty Ready
                </div>
                <div class="bounty-badge">
                    üí∞ DeFi Bounty Ready
                </div>
            </div>
            
            <nav class="enterprise-nav">
                <ul class="nav-links">
                    <li><a href="#" onclick="showDashboard()">Dashboard</a></li>
                    <li><a href="#" onclick="showGaming()">Gaming</a></li>
                    <li><a href="#" onclick="showDeFi()">DeFi</a></li>
                    <li><a href="#" onclick="showEnterprise()">Enterprise</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Container -->
    <div class="enterprise-container">
        <!-- Hero Section - UPDATED WITH BOUNTY MESSAGING -->
        <section class="enterprise-hero">
            <div class="hero-content">
                <h1 class="hero-title">
                    Africa's Enterprise Blockchain Commerce Platform
                </h1>
                <p class="hero-subtitle">
                    Now with <strong>Gamified Commerce</strong> & <strong>Real-World DeFi</strong> - Competing for $10,000 in Stacks Bounties
                </p>
                
                <!-- Global Credentials Grid - ENHANCED -->
                <div class="credentials-grid">
                    <div class="credential-card">
                        <div class="credential-icon">üåç</div>
                        <h3 class="credential-title">World Economic Forum</h3>
                        <p class="credential-desc">Sustainable Development Impact Meetings 2025 & Digital Trust Leadership</p>
                    </div>
                    <div class="credential-card">
                        <div class="credential-icon">üéÆ</div>
                        <h3 class="credential-title">Gaming Bounty Features</h3>
                        <p class="credential-desc">Merchant Leveling ‚Ä¢ Achievement System ‚Ä¢ Social Leaderboards ‚Ä¢ Loyalty Points</p>
                    </div>
                    <div class="credential-card">
                        <div class="credential-icon">üí∞</div>
                        <h3 class="credential-title">DeFi Bounty Features</h3>
                        <p class="credential-desc">Commerce Escrow ‚Ä¢ Cross-border Payments ‚Ä¢ Financial Inclusion ‚Ä¢ Revenue Models</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- GAMIFICATION SECTION - NEW -->
        <section class="gamification-features">
            <h2 style="text-align: center; margin-bottom: 1rem;">üéÆ Gamified Commerce Experience</h2>
            <p style="text-align: center; opacity: 0.9; margin-bottom: 2rem;">Turning African commerce into engaging experiences with game mechanics</p>
            
            <div class="game-grid">
                <div class="game-card">
                    <div class="game-icon">üèÜ</div>
                    <h3>Merchant Levels</h3>
                    <p>Progress from Novice to Enterprise through successful transactions</p>
                    <div class="progress-bar" style="background: rgba(255,255,255,0.3); height: 8px; border-radius: 4px; margin-top: 1rem;">
                        <div style="background: white; height: 100%; width: 65%; border-radius: 4px;"></div>
                    </div>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">Level 4: Professional Merchant</p>
                </div>
                
                <div class="game-card">
                    <div class="game-icon">üõ°Ô∏è</div>
                    <h3>Achievement System</h3>
                    <p>Earn badges for milestones and platform engagement</p>
                    <div class="achievement-system" style="margin-top: 1rem;">
                        <div style="background: gold; color: black; padding: 0.5rem; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; font-weight: bold;">1st</div>
                        <div style="background: silver; color: black; padding: 0.5rem; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; font-weight: bold;">10+</div>
                        <div style="background: #cd7f32; color: white; padding: 0.5rem; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; font-weight: bold;">50+</div>
                    </div>
                </div>
                
                <div class="game-card">
                    <div class="game-icon">üìà</div>
                    <h3>Loyalty Points</h3>
                    <p>Earn points for every transaction and platform activity</p>
                    <div style="margin-top: 1rem;">
                        <h2 style="font-size: 2rem; margin: 0;">2,450</h2>
                        <p style="margin: 0; font-size: 0.9rem;">Loyalty Points</p>
                    </div>
                </div>
            </div>

            <!-- Leaderboard -->
            <div class="leaderboard">
                <h3 style="color: var(--dark); margin-bottom: 1rem;">üèÖ Top Merchants Leaderboard</h3>
                <div class="leaderboard-item">
                    <span class="rank">#1</span>
                    <span>Lagos Tech Store</span>
                    <span>‚≠ê 4.9 ‚Ä¢ 245 transactions</span>
                </div>
                <div class="leaderboard-item">
                    <span class="rank">#2</span>
                    <span>Abuja Fashion Hub</span>
                    <span>‚≠ê 4.8 ‚Ä¢ 189 transactions</span>
                </div>
                <div class="leaderboard-item">
                    <span class="rank">#3</span>
                    <span>Kano Agri Export</span>
                    <span>‚≠ê 4.7 ‚Ä¢ 156 transactions</span>
                </div>
            </div>
        </section>

        <!-- DeFi FEATURES SECTION - NEW -->
        <section class="defi-features">
            <h2 style="text-align: center; margin-bottom: 1rem;">üí∞ Real-World DeFi Commerce</h2>
            <p style="text-align: center; opacity: 0.9; margin-bottom: 2rem;">Bringing decentralized finance to African SMEs through practical applications</p>
            
            <div class="game-grid">
                <div class="game-card">
                    <div class="game-icon">üîí</div>
                    <h3>Commerce Escrow</h3>
                    <p>Secure transactions with blockchain-powered escrow services</p>
                    <div style="margin-top: 1rem;">
                        <h2 style="font-size: 2rem; margin: 0;">$2.5M+</h2>
                        <p style="margin: 0; font-size: 0.9rem;">Protected Value</p>
                    </div>
                </div>
                
                <div class="game-card">
                    <div class="game-icon">üåç</div>
                    <h3>Cross-border Payments</h3>
                    <p>AFCFTA-aligned international trade facilitation</p>
                    <div style="margin-top: 1rem;">
                        <h2 style="font-size: 2rem; margin: 0;">12+</h2>
                        <p style="margin: 0; font-size: 0.9rem;">African Countries</p>
                    </div>
                </div>
                
                <div class="game-card">
                    <div class="game-icon">üìä</div>
                    <h3>Revenue Models</h3>
                    <p>Sustainable DeFi with real business revenue streams</p>
                    <div style="margin-top: 1rem;">
                        <h2 style="font-size: 2rem; margin: 0;">0.5%</h2>
                        <p style="margin: 0; font-size: 0.9rem;">Transaction Fee</p>
                    </div>
                </div>
            </div>

            <!-- Achievement System -->
            <div style="text-align: center; margin-top: 2rem;">
                <h3>üèÜ DeFi Achievement System</h3>
                <div class="achievement-system">
                    <div class="achievement">
                        <div>üîê</div>
                        <div>First Escrow</div>
                    </div>
                    <div class="achievement">
                        <div>üåç</div>
                        <div>Cross-border</div>
                    </div>
                    <div class="achievement">
                        <div>üí∞</div>
                        <div>$1K Volume</div>
                    </div>
                    <div class="achievement">
                        <div>üèÜ</div>
                        <div>Top Trader</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Existing Wallet and Dashboard sections remain the same but ENHANCED -->
        <section class="enterprise-wallet">
            <div class="wallet-header">
                <h2 class="wallet-title">üîó Enterprise Wallet Integration</h2>
                <div class="wallet-status">
                    <div class="status-dot" id="status-dot"></div>
                    <span id="status-text">üî¥ Disconnected</span>
                </div>
            </div>
            
            <div class="wallet-controls">
                <button class="enterprise-btn btn-primary" onclick="connectWallet()">
                    üîê Connect Leather Wallet
                </button>
                <button class="enterprise-btn btn-secondary" onclick="disconnectWallet()">
                    üö™ Disconnect
                </button>
                <button class="enterprise-btn btn-accent" onclick="testRealTransaction()">
                    üß™ Test Real Transaction
                </button>
                <!-- NEW GAMING/DEFI BUTTONS -->
                <button class="enterprise-btn" style="background: #9b59b6; color: white;" onclick="earnLoyaltyPoints()">
                    ‚≠ê Earn Points
                </button>
            </div>
            
            <div class="wallet-info" id="wallet-info">
                <div class="info-grid">
                    <div class="info-item">
                        <span class="info-label">Wallet Address</span>
                        <span class="info-value" id="user-address">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Balance</span>
                        <span class="info-value" id="user-balance">0.00 STX</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Loyalty Points</span>
                        <span class="info-value" id="loyalty-points">2,450</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Merchant Level</span>
                        <span class="info-value">üèÜ Level 4</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ENHANCED DASHBOARD WITH GAMING/DEFI TABS -->
        <section class="enterprise-dashboard">
            <div class="dashboard-header">
                <h2 class="dashboard-title">MeMart Commerce Dashboard</h2>
                <div class="credentials-badge">
                    üéÆ Gaming + üí∞ DeFi Features
                </div>
            </div>
            
            <div class="enterprise-tabs">
                <button class="enterprise-tab active" onclick="switchTab('escrow')">
                    üíº Escrow Management
                </button>
                <button class="enterprise-tab" onclick="switchTab('gaming')">
                    üéÆ Gaming Features
                </button>
                <button class="enterprise-tab" onclick="switchTab('defi')">
                    üí∞ DeFi Features
                </button>
                <button class="enterprise-tab" onclick="switchTab('leaderboard')">
                    üèÜ Leaderboard
                </button>
            </div>

            <!-- Existing Escrow Tab remains -->

            <!-- NEW GAMING TAB -->
            <div class="tab-content" id="gaming-tab">
                <h3>üéÆ Gamification Dashboard</h3>
                <div class="transaction-grid">
                    <div class="transaction-card">
                        <h4>Your Progress</h4>
                        <p>Level: <strong>Professional Merchant</strong></p>
                        <p>Points: <strong>2,450</strong></p>
                        <p>Next Level: <strong>3,000 points</strong></p>
                        <div class="progress-bar" style="background: #e9ecef; height: 10px; border-radius: 5px; margin: 1rem 0;">
                            <div style="background: var(--secondary); height: 100%; width: 65%; border-radius: 5px;"></div>
                        </div>
                    </div>
                    <div class="transaction-card">
                        <h4>Achievements</h4>
                        <p>üèÖ First Transaction</p>
                        <p>üèÖ 10+ Escrows</p>
                        <p>üèÖ Cross-border Pro</p>
                        <p>üîí $10K Volume (Locked)</p>
                    </div>
                    <div class="transaction-card">
                        <h4>Daily Challenges</h4>
                        <p>‚úÖ Complete 1 transaction</p>
                        <p>‚úÖ Connect wallet daily</p>
                        <p>üîÑ Refer a merchant</p>
                        <p>üîÑ Reach Level 5</p>
                    </div>
                </div>
            </div>

            <!-- NEW DEFI TAB -->
            <div class="tab-content" id="defi-tab">
                <h3>üí∞ DeFi Commerce Features</h3>
                <div class="transaction-grid">
                    <div class="transaction-card">
                        <h4>Escrow Statistics</h4>
                        <p>Total Volume: <strong>$2.5M+</strong></p>
                        <p>Active Escrows: <strong>47</strong></p>
                        <p>Success Rate: <strong>98.7%</strong></p>
                        <p>Fraud Prevention: <strong>80% reduction</strong></p>
                    </div>
                    <div class="transaction-card">
                        <h4>Revenue Model</h4>
                        <p>Platform Fee: <strong>0.5%</strong></p>
                        <p>Premium Features: <strong>AI Analytics</strong></p>
                        <p>API Access: <strong>Enterprise Tier</strong></p>
                        <p>Cross-border: <strong>AFCFTA aligned</strong></p>
                    </div>
                    <div class="transaction-card">
                        <h4>Financial Inclusion</h4>
                        <p>African SMEs: <strong>50,000 target</strong></p>
                        <p>Unbanked Access: <strong>Mobile-first</strong></p>
                        <p>Cross-border: <strong>12+ countries</strong></p>
                        <p>Job Creation: <strong>500+ targeted</strong></p>
                    </div>
                </div>
            </div>

            <!-- NEW LEADERBOARD TAB -->
            <div class="tab-content" id="leaderboard-tab">
                <h3>üèÜ Global Merchant Leaderboard</h3>
                <div class="leaderboard">
                    <div class="leaderboard-item">
                        <span class="rank">#1</span>
                        <span>Lagos Tech Store</span>
                        <span>‚≠ê 4.9 ‚Ä¢ 2,450 pts</span>
                    </div>
                    <div class="leaderboard-item">
                        <span class="rank">#2</span>
                        <span>Abuja Fashion Hub</span>
                        <span>‚≠ê 4.8 ‚Ä¢ 2,100 pts</span>
                    </div>
                    <div class="leaderboard-item">
                        <span class="rank">#3</span>
                        <span>Kano Agri Export</span>
                        <span>‚≠ê 4.7 ‚Ä¢ 1,890 pts</span>
                    </div>
                    <div class="leaderboard-item">
                        <span class="rank">#4</span>
                        <span>Accra Electronics</span>
                        <span>‚≠ê 4.6 ‚Ä¢ 1,750 pts</span>
                    </div>
                    <div class="leaderboard-item">
                        <span class="rank">#5</span>
                        <span>Nairobi Crafts</span>
                        <span>‚≠ê 4.5 ‚Ä¢ 1,600 pts</span>
                    </div>
                </div>
            </div>
        </section>
    </div>
   
<!-- JavaScript-- ENHANCED WITH GAMING/DEFI FUNCTIONS -->
<script>
    // ===== ADD THESE MISSING FUNCTIONS AT THE TOP OF YOUR EXISTING JAVASCRIPT =====
    
    function showDashboard() {
        showNotification('üè† Enterprise Dashboard: Commerce Analytics ‚Ä¢ Transaction History ‚Ä¢ Performance Metrics', 'info');
    }

    function showEnterprise() {
        showNotification('üèõÔ∏è Enterprise Features: CAMA Registered ‚Ä¢ WEF Partnerships ‚Ä¢ Global Credentials', 'info');
    }

    function switchTab(tabName) {
        // Remove active class from all tabs
        document.querySelectorAll('.enterprise-tab').forEach(tab => tab.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
        
        // Add active class to clicked tab
        event.target.classList.add('active');
        document.getElementById(`${tabName}-tab`).classList.add('active');
    }

    function connectWallet() {
        showNotification('üîê Connecting Enterprise Wallet to Stacks Blockchain...', 'info');
        // Simulate connection
        setTimeout(() => {
            document.getElementById('status-text').textContent = 'üü¢ Connected';
            document.getElementById('status-dot').style.background = '#00d4aa';
            document.getElementById('wallet-info').style.display = 'block';
            document.getElementById('user-address').textContent = 'ST3XE7...Q7WA';
            document.getElementById('user-balance').textContent = '2,450.00 STX';
            showNotification('‚úÖ Enterprise Wallet Connected! Ready for STX transactions.', 'success');
        }, 2000);
    }

    function disconnectWallet() {
        document.getElementById('status-text').textContent = 'üî¥ Disconnected';
        document.getElementById('status-dot').style.background = '#ff6b6b';
        document.getElementById('wallet-info').style.display = 'none';
        showNotification('üö™ Enterprise Wallet Disconnected', 'info');
    }

    function testRealTransaction() {
        showNotification('üß™ Testing STX Transaction for Gaming/DeFi Features...', 'info');
        setTimeout(() => {
            earnLoyaltyPoints();
            showNotification('‚úÖ STX Transaction Successful! +35 Loyalty Points Earned', 'success');
        }, 1500);
    }

    // ===== NOTIFICATION SYSTEM =====
    function showNotification(message, type = 'info') {
        // Create notification element if it doesn't exist
        let notification = document.getElementById('notification');
        if (!notification) {
            notification = document.createElement('div');
            notification.id = 'notification';
            notification.className = `notification ${type}`;
            notification.innerHTML = `<span id="notification-text">${message}</span>`;
            document.body.appendChild(notification);
            
            // Add notification styles
            const style = document.createElement('style');
            style.textContent = `
                .notification {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 15px 20px;
                    border-radius: 8px;
                    color: white;
                    z-index: 1000;
                    transform: translateX(400px);
                    transition: transform 0.3s ease;
                    max-width: 400px;
                }
                .notification.show {
                    transform: translateX(0);
                }
                .notification.success { background: #28a745; }
                .notification.error { background: #dc3545; }
                .notification.info { background: #17a2b8; }
                .notification.warning { background: #ffc107; color: black; }
            `;
            document.head.appendChild(style);
        } else {
            notification.className = `notification ${type}`;
            document.getElementById('notification-text').textContent = message;
        }
        
        setTimeout(() => notification.classList.add('show'), 100);
        setTimeout(() => notification.classList.remove('show'), 5000);
    }

    // ===== KEEP ALL YOUR EXISTING MeMart FUNCTIONS BELOW =====
    // Your existing functions like these STAY:
    function earnLoyaltyPoints() {
        const points = Math.floor(Math.random() * 50) + 10;
        showNotification(`‚≠ê +${points} Loyalty Points Earned! Keep engaging with the platform.`, 'success');
        
        const currentPoints = document.getElementById('loyalty-points');
        const currentValue = parseInt(currentPoints.textContent.replace(',', '')) || 0;
        currentPoints.textContent = (currentValue + points).toLocaleString();
    }

    function createEscrow() {
        const buyer = document.getElementById('buyer-address').value;
        const seller = document.getElementById('seller-address').value;
        const amount = document.getElementById('escrow-amount').value;
        const terms = document.getElementById('transaction-terms').value;
        
        if (!buyer || !seller || !amount) {
            showNotification('‚ùå Please fill all required fields', 'error');
            return;
        }
        
        const points = Math.floor(amount * 2);
        earnLoyaltyPoints();
        
        showNotification(`‚úÖ Enterprise Escrow Created: ${amount} STX secured ‚Ä¢ +${points} points earned!`, 'success');
        
        document.getElementById('buyer-address').value = '';
        document.getElementById('seller-address').value = '';
        document.getElementById('escrow-amount').value = '';
        document.getElementById('transaction-terms').value = '';
    }

    // ... ALL YOUR OTHER EXISTING FUNCTIONS STAY HERE ...
    
    // Initialize with bounty messaging
    document.addEventListener('DOMContentLoaded', function() {
        showNotification('üöÄ MeMart Platform Ready ‚Ä¢ Gaming & DeFi Bounty Features Active ‚Ä¢ $10,000 Prize Potential', 'info');
        
        setTimeout(() => {
            unlockAchievement('Platform Explorer');
        }, 3000);
        
        document.getElementById('escrow-tab').classList.add('active');
    });
</script>
  <script>
        // ===== GAMIFICATION FUNCTIONS =====
        function showGaming() {
            showNotification('üéÆ Gaming Features: Merchant Leveling ‚Ä¢ Achievement System ‚Ä¢ Loyalty Points ‚Ä¢ Social Leaderboards', 'info');
        }

        function showDeFi() {
            showNotification('üí∞ DeFi Features: Commerce Escrow ‚Ä¢ Cross-border Payments ‚Ä¢ Financial Inclusion ‚Ä¢ Sustainable Revenue Models', 'info');
        }

        function earnLoyaltyPoints() {
            const points = Math.floor(Math.random() * 50) + 10;
            showNotification(`‚≠ê +${points} Loyalty Points Earned! Keep engaging with the platform.`, 'success');
            
            // Update points display
            const currentPoints = document.getElementById('loyalty-points');
            const currentValue = parseInt(currentPoints.textContent.replace(',', '')) || 0;
            currentPoints.textContent = (currentValue + points).toLocaleString();
        }

        // ===== ENHANCED TRANSACTION WITH GAMIFICATION =====
        function createEscrow() {
            const buyer = document.getElementById('buyer-address').value;
            const seller = document.getElementById('seller-address').value;
            const amount = document.getElementById('escrow-amount').value;
            const terms = document.getElementById('transaction-terms').value;
            
            if (!buyer || !seller || !amount) {
                showNotification('‚ùå Please fill all required fields', 'error');
                return;
            }
            
            // Award points for transaction
            const points = Math.floor(amount * 2); // 2 points per STX
            earnLoyaltyPoints();
            
            showNotification(`‚úÖ Enterprise Escrow Created: ${amount} STX secured ‚Ä¢ +${points} points earned!`, 'success');
            
            // Clear form
            document.getElementById('buyer-address').value = '';
            document.getElementById('seller-address').value = '';
            document.getElementById('escrow-amount').value = '';
            document.getElementById('transaction-terms').value = '';
        }

        // ===== BOUNTY-SPECIFIC FEATURES =====
        function unlockAchievement(achievementName) {
            showNotification(`üèÜ Achievement Unlocked: ${achievementName}`, 'success');
        }

        function levelUpMerchant() {
            showNotification(`üéâ Merchant Level Up! New features unlocked.`, 'success');
        }

        // Initialize with bounty messaging
        document.addEventListener('DOMContentLoaded', function() {
            showNotification('üöÄ MeMart Platform Ready ‚Ä¢ Gaming & DeFi Bounty Features Active ‚Ä¢ $10,000 Prize Potential', 'info');
            
            // Simulate some gaming features
            setTimeout(() => {
                unlockAchievement('Platform Explorer');
            }, 3000);
        });

        // Rest of your existing JavaScript functions remain the same
      // (connectWallet, handleRealWalletConnection, fetchRealBalance, etc.)
// ===== SMART CONTRACT INTERACTION FUNCTIONS =====

// Contract details (you'll get these after deployment)
const CONTRACT_ADDRESS = 'ST1PQHQKV0RJXZFYVDGX6M4U58RMMBN8ML1M9MSB9';
const CONTRACT_NAME = 'cargo-escrow';

// Leather Wallet Integration
let userSession = null;

// Initialize Leather Wallet connection
async function connectWallet() {
    try {
        if (typeof window.LeatherProvider !== 'undefined') {
            const provider = new window.LeatherProvider();
            const accounts = await provider.getAccounts();
            userSession = {
                address: accounts[0],
                provider: provider
            };
            showNotification('‚úÖ Wallet connected successfully!', 'success');
            await updateBalance(); // Show real STX balance
            return userSession;
        } else {
            throw new Error('Leather Wallet not installed');
        }
    } catch (error) {
        showNotification('‚ùå Failed to connect wallet: ' + error.message, 'error');
        return null;
    }
}

// Get real STX balance from blockchain
async function updateBalance() {
    if (!userSession) return;
    
    try {
        const response = await fetch(`https://api.testnet.hiro.so/extended/v1/address/${userSession.address}/balances`);
        const data = await response.json();
        const stxBalance = data.stx.balance / 1000000; // Convert from microSTX to STX
        
        // Update UI with real balance
        const balanceElement = document.getElementById('stxBalance');
        if (balanceElement) {
            balanceElement.textContent = `Balance: ${stxBalance.toFixed(2)} STX`;
        }
        
        return stxBalance;
    } catch (error) {
        console.error('Error fetching balance:', error);
    }
}

async function createEscrowTransaction(sellerAddress, amountSTX, description) {
    try {
        // Check if wallet is connected
        if (!userSession) {
            showNotification('‚ùå Please connect your Leather wallet first', 'error');
            return;
        }

        // Check balance before proceeding
        const currentBalance = await updateBalance();
        if (currentBalance < amountSTX) {
            showNotification(`‚ùå Insufficient balance. You have ${currentBalance.toFixed(2)} STX but need ${amountSTX} STX`, 'error');
            return;
        }

        showNotification('üîÑ Creating escrow on blockchain...', 'info');

        // Convert STX to microSTX (1 STX = 1,000,000 microSTX)
        const amountMicroSTX = Math.floor(amountSTX * 1000000);

        // Create the contract call
        const contractCall = {
            contractAddress: CONTRACT_ADDRESS,
            contractName: CONTRACT_NAME,
            functionName: 'create-escrow',
            functionArgs: [
                `'${sellerAddress}`, // Seller address
                `u${amountMicroSTX}`, // Amount in microSTX
                `"${description}"`    // Description
            ],
            postConditionMode: 0x01, // Allow mode
            postConditions: []
        };

        // Execute the transaction using Leather Wallet
        const result = await userSession.provider.signTransaction({
            message: 'Create Escrow',
            contractCall: contractCall
        });

        if (result) {
            showNotification('‚úÖ Escrow created successfully! Transaction pending...', 'success');
            
            // Wait for transaction confirmation
            const txId = result.txId;
            await waitForTransactionConfirmation(txId);
            
            showNotification('üéâ Escrow transaction confirmed on blockchain!', 'success');
            await updateBalance(); // Update balance after transaction
        }

    } catch (error) {
        console.error('Error creating escrow:', error);
        showNotification('‚ùå Failed to create escrow: ' + error.message, 'error');
    }
}

async function getMerchantStats(userAddress) {
    try {
        // This calls the read-only function
        const response = await fetch(`https://api.testnet.hiro.so/v2/contracts/call-read/${CONTRACT_ADDRESS}/${CONTRACT_NAME}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                sender: userAddress,
                arguments: [`'${userAddress}`]
            })
        });

        const data = await response.json();
        return data.result;
    } catch (error) {
        console.error('Error fetching merchant stats:', error);
        showNotification('‚ùå Failed to fetch merchant stats', 'error');
        return null;
    }
}

// Helper function to wait for transaction confirmation
async function waitForTransactionConfirmation(txId, maxAttempts = 30) {
    for (let i = 0; i < maxAttempts; i++) {
        try {
            const response = await fetch(`https://api.testnet.hiro.so/extended/v1/tx/${txId}`);
            const data = await response.json();
            
            if (data.tx_status === 'success') {
                return true;
            } else if (data.tx_status === 'abort') {
                throw new Error('Transaction failed');
            }
            
            // Wait 2 seconds before checking again
            await new Promise(resolve => setTimeout(resolve, 2000));
        } catch (error) {
            console.error('Error checking transaction:', error);
        }
    }
    throw new Error('Transaction confirmation timeout');
}

// Notification function (you'll need to implement this UI)
function showNotification(message, type = 'info') {
    console.log(`${type}: ${message}`);
    // Add your UI notification code here
    // Example: toast, alert, or updating a status div
}
  </script>
</body>
</html>
